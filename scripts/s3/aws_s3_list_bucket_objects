#!/bin/bash

function aws_s3_list_bucket_objects() {
    read -p "Enter the bucket name you want to list objects from: " s3_bucket

    # Fetch object list
    objects=$(aws s3 ls s3://$s3_bucket 2>&1)
    
    # Handle case when bucket is empty or invalid
    if [[ -z "$objects" ]]; then
        echo -e "${BOLD}${RED}No objects found or invalid bucket name!${RESET}"
        return
    fi

    # Print Table Header with Borders
    echo -e "${BOLD}┌──────────────────────┬────────────────────────────────┬────────────────────────┐${RESET}"
    echo -e "${BOLD}│     Date Created     │          Object Name           │    Object Size (KB)    │${RESET}"
    echo -e "${BOLD}├──────────────────────┼────────────────────────────────┼────────────────────────┤${RESET}"

    # Process each object and format output
    echo "$objects" | while read -r date time size object; do
        if [[ -n "$object" ]]; then
            size_kb=$((size / 1024))  # Convert bytes to KB
            printf "${BOLD}│ %-20s │ %-30s │ %10s KB          │${RESET}\n" "$date" "$object" "$size_kb"
        fi
    done

    echo -e "${BOLD}└──────────────────────┴────────────────────────────────┴────────────────────────┘${RESET}"
}